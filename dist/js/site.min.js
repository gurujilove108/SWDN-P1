"use strict";function log(e){console.log(e)}function timeNow(){return performance.now()}function timeDifference(e,t){return e-t}function round(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)}function loadStyleSheetsAsync(){config.stylesheetsAsyncLoad.forEach(function(e,t,n){jQuery("head").append(e)})}function defined(e){return void 0!==e}function regExpMatch(e,t){return console.log(e.test(t)),e.test(t)}function trim(e){return e=e.trim()}function validAccountName(e){return defined(e)&&trim(e).length>=3}function validEmail(e){return defined(e)&&regExpMatch(config.regexp.email,trim(e))}function validPassword(e){return defined(e)&&regExpMatch(config.regexp.password,trim(e))}function validPhone(e){return defined(e)&&regExpMatch(config.regexp.phone,trim(e))}function validEmployer(e){return defined(e)&&trim(e).length>=3}function validEventName(e){return defined(e)&&e.length>0&&notAllDigits(e)}function validHost(e){return validEventName(e)}function validEventType(e){return validEventName(e)}function validGuest(e){return validEventName(e)}function validAddress(e){return validEventname(e)&&e.length>3}function notAllDigits(e){return!config.regexp.allNumbers.test(e)}function removeDisabledAttr(e){jQuery(e).attr("disabled",null)}function addDisabledAttr(e){jQuery(e).attr("disabled",!0)}function clearInput(e){jQuery(e).val("")}var app=angular.module("swdnP1App",["swdnP1AppControllers","ngRoute","ui.bootstrap"]),routeConfig=function(e){e.when("/events",{templateUrl:"/views/events.html",controller:"EventController"}),e.when("/create_event",{templateUrl:"/views/create_event.html",controller:"EventController"}),e.when("/login",{templateUrl:"/views/login.html",controller:"LoginController"}),e.when("/signup",{templateUrl:"/views/signup.html",controller:"SignupController"}),e.otherwise({redirectTo:"/"})};routeConfig.$inject=["$routeProvider"],app.config(routeConfig),app.filter("startFrom",function(){var e=function(e,t){return e.slice(t)};return e}),app.constant("HTTP_ERRORS",{UNAUTHORIZED:401,test:503});var app=angular.module("swdnP1App",["swdnP1AppControllers","ngRoute","ui.bootstrap"]),routeConfig=function(e){e.when("/events",{templateUrl:"/html/events.min.html",controller:"EventController"}),e.when("/create_event",{templateUrl:"/html/create_event.min.html",controller:"EventController"}),e.when("/login",{templateUrl:"/html/login.min.html",controller:"LoginController"}),e.when("/signup",{templateUrl:"/html/signup.min.html",controller:"SignupController"}),e.otherwise({redirectTo:"/"})};routeConfig.$inject=["$routeProvider"],app.config(routeConfig),app.filter("startFrom",function(){var e=function(e,t){return e.slice(t)};return e}),app.constant("HTTP_ERRORS",{UNAUTHORIZED:401,test:503});var app=angular.module("swdnP1App",["swdnP1AppControllers","ngRoute","ui.bootstrap"]),routeConfig=function(e){e.when("/events",{templateUrl:"/html/events.min.html",controller:"EventController"}),e.when("/create_event",{templateUrl:"/html/create_event.min.html",controller:"EventController"}),e.when("/login",{templateUrl:"/html/login.min.html",controller:"LoginController"}),e.when("/signup",{templateUrl:"/html/signup.min.html",controller:"SignupController"}),e.otherwise({redirectTo:"/"})};routeConfig.$inject=["$routeProvider"],app.config(routeConfig),app.filter("startFrom",function(){var e=function(e,t){return e.slice(t)};return e}),app.constant("HTTP_ERRORS",{UNAUTHORIZED:401,test:503});var config={regexp:{email:new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),password:new RegExp(/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}/),phone:new RegExp(/^((((\(\d{3}\))|(\d{3}-))\d{3}-\d{4})|(\+?\d{2}((-| )\d{1,8}){1,5}))(( x| ext)\d{1,5}){0,1}$/),allNumbers:new RegExp("^[-]?[0-9]+[.]?[0-9]+$")},stylesheetsAsyncLoad:[]},swdnP1App=swdnP1App||{},controllers=swdnP1App.controllers=angular.module("swdnP1AppControllers",["ui.bootstrap"]);controllers.controller("EventController",["$scope","$location",function(e,t){e.isEventNameValid=!1,e.isEventHostValid=!1,e.isEventTypesValid=!1,e.isEventTypeValid=!1,e.isGuestValid=!1,e.isGuestlistValid=!1,e.isStartDateValid=!1,e.isEndDateValid=!1,e.isAddressValid=!1,e.eventNameStatus=jQuery(".event-name-status"),e.eventHostStatus=jQuery(".event-host-status"),e.eventTypesStatus=jQuery(".event-eventtypes-status"),e.eventGuestlistStatus=jQuery(".event-guestlist-status"),e.startDateStatus=jQuery(".event-datetime-start-status"),e.endDateStatus=jQuery(".event-datetime-end-status"),e.eventAddressStatus=jQuery(".event-address-status"),e.eventNameInput=jQuery("#event-name-input"),e.eventHostInput=jQuery("#event-host-input"),e.eventTypeInput=jQuery("#event-type-input"),e.eventTypeList=jQuery("#eventtypes-list"),e.guestlist=jQuery("#guestlist"),e.guestlistInput=jQuery("#event-guest-input"),e.eventStartDateInput=jQuery("#event-datetime-start"),e.eventEndDateInput=jQuery("#event-datetime-end"),e.eventAddressInput=jQuery("#event-address"),e.startDateTimestamp,e.endDateTimestamp,e.allEvents=[],e.checkEventNameValid=function(){validEventName(e.eventName)?(e.eventNameStatus.text("Event Name is valid").css("color","green"),e.isEventNameValid=!0):(e.eventNameStatus.text("Event Name is invalid").css("color","red"),e.isEventNameValid=!1)},e.handleEventNameUnfocus=function(){e.isEventNameValid?(e.eventNameStatus.text("Event Name is valid").css("color","green"),e.isEventNameValid=!0):(e.eventNameStatus.text("Event Name is invalid, please validate before you continue the form process").css("color","red"),e.isEventNameValid=!1)},e.checkEventHostValid=function(){validHost(e.eventHost)?(e.eventHostStatus.text("Host Name is valid").css("color","green"),e.isEventHostValid=!0):(e.eventHostStatus.text("Host Name is invalid").css("color","red"),e.isEventHostValid=!1)},e.handleEventHostUnfocus=function(){e.isEventHostValid?e.setFocus(e.eventTypeInput):e.eventHostStatus.text("Event Host is invalid, please validate before you continue the form process").css("color","red")},e.checkEventTypeValid=function(){validEventType(e.eventType)?(e.eventTypesStatus.text("Type Name is valid, you are ready to add to the list").css("color","green"),e.isEventTypeValid=!0):(e.eventTypesStatus.text("Type Name is invalid").css("color","red"),e.isEventTypeValid=!1)},e.checkEventTypesValid=function(){e.eventTypeList.children().length>0?(e.isEventTypesValid=!0,e.eventTypesStatus.text("There is at least one event type so you are good to go").css("color","green")):(e.eventTypesStatus.text("At least one event type is required").css("color","red"),e.isEventTypesValid=!1)},e.checkGuestInputValid=function(){validGuest(e.currentGuest)?(e.eventGuestlistStatus.text("Guest Name is valid, you are ready to add to the list").css("color","green"),e.isGuestValid=!0):(e.eventGuestlistStatus.text("Guest Name is invalid").css("color","red"),e.isGuestValid=!1)},e.checkGuestlistValid=function(){e.guestlist.children().length>0?(e.isGuestlistValid=!0,e.eventGuestlistStatus.text("There is at least one guest so you are good to go").css("color","green")):(e.eventGuestlistStatus.text("At least one guest is required").css("color","red"),e.isGuestlistValid=!1)},e.checkStartDateValid=function(){defined(e.eventDateStart)?(e.startDateTimestamp=new Date(e.eventDateStart).getTime(),e.startDateTimestamp<=Date.now()?(e.startDateStatus.text("Event start date can not be in the past").css("color","red"),e.isStartDateValid=!1):(e.startDateStatus.text("Start date is valid").css("color","green"),e.isStartDateValid=!0)):(e.startDateStatus.text("Please provide a valid start date").css("color","red"),e.isStartDateValid=!1)},e.checkEndDateValid=function(){defined(e.eventDateEnd)||e.endDateStatus.text("Please provide a valid end date").css("color","red"),e.isStartDateValid?e.isStartDateValid?defined(e.eventDateEnd)&&(e.endDateTimestamp=new Date(e.eventDateEnd).getTime(),e.endDateTimestamp>e.startDateTimestamp?(e.endDateStatus.text("End date is valid").css("color","green"),e.isEndDateValid=!0):(e.endDateStatus.text("End date can not be equal to or less than the start date").css("color","red"),e.isEndDateValid=!1)):(e.endDateStatus.text("Please provide a valid start date").css("color","red"),e.isEndDateValid=!1):(e.endDateStatus.text("Please provide a valid start date before entering an end date").css("color","red"),e.setFocus(e.eventStartDateInput))},e.checkEventAddressValid=function(){defined(e.address)&&e.address.length>=3?(e.isAddressValid=!0,e.eventAddressStatus.text("Address is valid").css("color","green")):(e.isAddressValid=!1,e.eventAddressStatus.text("Address is invalid").css("color","red"))},e.onEventNameFocus=function(){e.checkEventNameValid()},e.onEventNameChange=function(){e.checkEventNameValid()},e.onEventNameUnfocus=function(){e.handleEventNameUnfocus()},e.onEventHostFocus=function(){e.checkEventHostValid()},e.onEventHostChange=function(){e.checkEventHostValid()},e.onEventHostUnfocus=function(){e.handleEventHostUnfocus()},e.onEventTypeFocus=function(){e.checkEventTypeValid()},e.onEventTypeChange=function(){e.checkEventTypeValid()},e.onEventTypeUnfocus=function(){e.checkEventTypesValid()},e.onGuestInputFocus=function(){e.checkGuestInputValid()},e.onGuestInputChange=function(){e.checkGuestInputValid()},e.onGuestInputUnfocus=function(){e.checkGuestlistValid()},e.onEventStartDateFocus=function(){e.checkStartDateValid()},e.onEventStartDateChange=function(){e.checkStartDateValid()},e.onEventStartDateUnfocus=function(){e.checkStartDateValid()},e.onEventEndDateFocus=function(){e.checkEndDateValid()},e.onEventEndDateChange=function(){e.checkEndDateValid()},e.onEventEndDateUnfocus=function(){e.checkEndDateValid()},e.onAddressFocus=function(){e.checkEventAddressValid()},e.onAddressChange=function(){e.checkEventAddressValid()},e.onAddressUnfocus=function(){e.checkEventAddressValid()},e.addGuestToDatalist=function(){e.isGuestValid&&(e.guestlist.append("<option value='%s'>".replace("%s",e.currentGuest)),e.currentGuest="",e.guestlistInput.val(""),e.checkGuestInputValid(),e.setFocus(e.guestlistInput))},e.addEventTypeToDatalist=function(){e.isEventTypeValid&&(e.eventTypeList.append("<option value='%s'>".replace("%s",e.eventType)),e.eventType="",e.eventTypeInput.val(""),e.checkEventTypeValid(),e.setFocus(e.eventTypeInput))},e.setFocus=function(e){e.focus()},e.checkPath=function(){"/create_event"===t.path()&&(e.setFocus(e.eventNameInput),e.onEventNameFocus())},e.checkPath(),e.showBox=function(e){jQuery(e).removeClass("hidden")},e.closeBox=function(e){jQuery(e).addClass("hidden")},e.createEvent=function(){e.formValid()&&e.sendGapiCreateForm()},e.formValid=function(){return e.isGuestlistValid&&e.isStartDateValid&&e.isEndDateValid&&e.isAddressValid&&e.isEventNameValid&&e.isEventHostValid},e.sendGapiCreateForm=function(){var t,n,s,a,o,i=e.guestlist.children(),r=e.eventTypeList.children(),c=i.length,l=r.length,u=jQuery("#guest-message").val(),d={event_name:e.eventName,event_host:e.eventHost,event_start:e.startDateTimestamp,event_end:e.endDateTimestamp,event_address:e.address};if(c>0){for(s=0,a=[];s<c;s++)t=i[s].value,a.push(t);d.event_guestlist=a}if(l>0){for(s=0,o=[];s<l;s++)n=r[s].value,o.push(n);d.event_types=o}u.length>0?d.event_guestmessage=u:d.event_guestmessage="No current message for this event at this time";var v=gapi.client.user_endpoint.create_event(d);v.execute(function(t){t.hasOwnProperty("successful")&&"1"===t.successful&&(e.showBox("#event-create-success"),jQuery("#eventname").text(e.eventName))})},e.container=jQuery(".events-container-wrapper"),e.createDataList=function(e,t,n){if(e.hasOwnProperty("length")&&e.length>0){var s="<input list='%s'>".replace("%s",n+t),a="<datalist id='%s'>".replace("%s",n+t);return e.forEach(function(e,t){a+="<option value='%s'>".replace("%s",e)}),a+="</datalist>",{input:s,datalist:a}}return{input:"no",datalist:"values on the list"}},e.loadAllEventsOntoPage=function(){var t,n,s,a,o,i,r,c,l,u,d,v=gapi.client.user_endpoint.all_events();v.execute(function(v){v.hasOwnProperty("events")?v.events.forEach(function(v,p){v.event_start=new Date(parseInt(v.event_start)),v.event_end=new Date(parseInt(v.event_end)),t=e.createDataList(v.event_guestlist,p,"guests"),n=e.createDataList(v.event_types,p,"eventtypes"),a="<div class='row text-left'><div class='col-xs-12'><label for='event_name'>Name of Event: </label><span id='event_name'> {{event_name}}</span></div></div> ",o="<div class='row text-left'><div class='col-xs-12'><label for='event_type'>Event Types: </label><span id='event_type'>%s </span></div></div> ".replace("%s",n.input+n.datalist),i="<div class='row text-left'><div class='col-xs-12'><label for='event_host'>Host of Event: </label><span id='event_host'> {{event_host}}</span></div></div> ",r="<div class='row text-left'><div class='col-xs-12'><label for='event_start'>Event Start Date: </label><span id='event_start'> {{event_start}}</span></div></div> ",c="<div class='row text-left'><div class='col-xs-12'><label for='event_end'>Event End Date: </label><span id='event_end'> {{event_end}}</span></div></div> ",l="<div class='row text-left'><div class='col-xs-12'><label for='event_guestlist'>Event Guest list: </label><span id='event_guestlist' class='event_guestlist_unbelievable'>%s </span></div></div> ".replace("%s",t.input+t.datalist),u="<div class='row text-left'><div class='col-xs-12'><label for='event_guestmessage'>Message for Guests: </label><span id='event_guestmessage'> {{event_guestmessage}}</span></div></div>",d="<div class='row text-left'><div class='col-xs-12'><label for='address'>Address for event: </label><span id='address'> {{event_address}}</span></div></div><hr> ",[a,o,i,r,c,l,u,d].forEach(function(t,n){s=Mustache.to_html(t,v),e.container.append(s)})}):(jQuery(".no-events").text("There are currently no events, to create an event click"),jQuery(".no-events").append(" <a href='/#/create_event'>create an event</a>"))})}}]),jQuery(document).ready(function(){jQuery(window).resize(function(){$("#wrapper").removeClass("toggled")})}),controllers.controller("LoginController",["$scope","$location",function(e,t){e.account_name_valid=!1,e.account_password_valid=!1,e.account_name_input=jQuery("#account-name-login"),e.account_password=jQuery("#login-password"),e.account_name_status=jQuery(".account-name-login-status"),e.account_password_status=jQuery(".password-login-status"),e.submitLoginForm=function(){e.formValidated()&&e.sendGapiLoginForm()},e.formValidated=function(){return e.account_name_valid&&e.account_password_valid},e.accountNameExists=function(){var t=gapi.client.user_endpoint.user_exists({username:e.account_name});t.execute(function(t){"false"===t.exists?(e.account_name_valid=!1,e.setFocus("account-name-login"),e.account_name_status.text("This account does not exist. Please enter an account name that exists or click below to sign up").css("color","red")):"true"===t.exists&&(e.account_name_valid=!0,e.account_name_status.text("Account name exists!").css("color","green"),e.setFocus("login-password"),e.onPasswordFocus())})},e.passwordMatchesAccountName=function(){var t=gapi.client.user_endpoint.check_password_match({username:e.account_name,password:e.password});t.execute(function(t){"true"===t.match?(e.account_password_valid=!0,e.account_password_status.text("password matches account name, button is enabled, press enter to login").css("color","green"),e.setFocus("btn-login")):e.account_password_status.text("Password does not match, please try again").css("color","red")})},e.setFocus=function(e){jQuery("#"+e).focus()},e.sendGapiLoginForm=function(){var t={account_name:e.account_name,password:e.password},n=gapi.client.user_endpoint.user_login(t);n.execute(function(e){log(e)})},e.onAccountNameFocus=function(){validAccountName(e.account_name)||e.account_name_status.text("Account name is currently invalid").css("color","red")},e.onAccountNameChange=function(){validAccountName(e.account_name)?e.account_name_status.text("Account name is valid").css("color","green"):(e.account_name_status.text("Account name is invalid").css("color","red"),e.account_name_valid&&(e.account_name_valid=!1))},e.onAccountNameUnfocus=function(){validAccountName(e.account_name)&&!e.account_name_valid&&e.accountNameExists()},e.onPasswordFocus=function(){validPassword(e.password)||e.account_password_status.text("Password is currently invalid").css("color","red")},e.onPasswordChange=function(){validPassword(e.password)?e.account_password_status.text("Password is valid"):e.account_password_status.text("Password is currently Invalid")},e.onPasswordUnfocus=function(){validPassword(e.password)?e.account_password_valid||e.passwordMatchesAccountName():e.account_password_status.text("Password is currently Invalid").css("color","red")},e.checkPath=function(){var n=t.path();"/login"===n&&(e.setFocus("account-name-login"),e.onAccountNameFocus())},e.checkPath()}]),controllers.controller("RootController",["$scope","$location",function(e,t){e.toggleMenu=function(){jQuery("#wrapper").toggleClass("toggled")},e.loadInitialPage=function(){t.path("/events")},e.loadInitialPage()}]),controllers.controller("SignupController",["$scope","$location",function(e,t){e.account_name_error="Account name must be at least 3 characters",e.email_error="Email must meet the following requirements, Some letters, an @ sign, some letters, a period, some letters",e.password_error="Password must be 8 characters in length, include 1 lowercase and 1 uppercase letter",e.phone_error="Phone must be in format (555)555-5555",e.employer_error="Employer name must be at least 3 characters in length",e.account_name_exists_error="That Account already exists, please enter a different account name.",e.account_name_valid_msg="Account name is valid",e.email_valid_msg="Email is valid",e.password_valid_msg="Password is valid",e.phone_valid_msg="Phone is valid",e.employer_valid_msg="Employer is valid",e.$account_name_status=jQuery(".account-name-status"),e.$email_status=jQuery(".email-status"),e.$password_status=jQuery(".password-status"),e.$phone_status=jQuery(".phone-status"),e.$employer_status=jQuery(".employer-status"),e.is_account_name_valid=!1,e.is_email_valid=!1,e.is_password_valid=!1,e.is_phone_valid=!1,e.is_employer_valid=!1,e.username_exists=!1,e.onAccountNameFocus=function(){validAccountName(e.account_name)?(e.$account_name_status.text(e.account_name_valid_msg).css("color","green"),e.is_account_name_valid=!1):(e.$account_name_status.text(e.account_name_error).css("color","red"),e.is_account_name_valid=!1)},e.onAccountNameChange=function(){validAccountName(e.account_name)?(e.$account_name_status.text(e.account_name_valid_msg).css("color","green"),e.is_account_name_valid=!0):(e.$account_name_status.text(e.account_name_error).css("color","red"),e.is_account_name_valid=!1)},e.onAccountNameUnfocus=function(){},e.onEmailFocus=function(){e.is_account_name_valid||e.setFocus("account_name"),jQuery("#email-signup").val().length<=6&&e.$email_status.text(e.email_error).css("color","red")},e.onEmailChange=function(){validEmail(e.email)&&jQuery("#email-signup").val().length>=6?(e.$email_status.text(e.email_valid_msg).css("color","green"),e.is_email_valid=!0):(e.$email_status.text(e.email_error).css("color","red"),e.is_email_valid=!1)},e.onEmailUnfocus=function(){e.is_email_valid||(e.$email_status.text(e.email_error).css("color","red"),e.setFocus("email-signup"))},e.onPasswordFocus=function(){validPassword(e.password)||e.$password_status.text(e.password_error).css("color","red")},e.onPasswordChange=function(){validPassword(e.password)?(e.$password_status.text(e.password_valid_msg).css("color","green"),e.is_password_valid=!0):(e.$password_status.text(e.password_error).css("color","red"),e.is_password_valid=!1)},e.onPasswordUnfocus=function(){e.is_password_valid?e.setFocus("phone"):(e.$password_status.text(e.password_error).css("color","red"),e.setFocus("password-signup"))},e.onPhoneFocus=function(){},e.onPhoneChange=function(){validPhone(e.phone_number)?(e.$phone_status.text(e.phone_valid_msg).css("color","green"),e.is_phone_valid=!0):!validPhone(e.phone_number)&&e.phone_number.length>0?(e.$phone_status.text(e.phone_error).css("color","red"),e.is_phone_valid=!1):e.$phone_status.text("")},e.onPhoneUnfocus=function(){},e.onEmployerChange=function(){validEmployer(e.employer)?(e.$employer_status.text(e.employer_valid_msg).css("color","green"),e.is_employer_valid=!0):!validEmployer(e.employer)&&e.employer.length>0?(e.$employer_status.text(e.employer_error).css("color","red"),e.is_employer_valid=!1):e.$employer_status.text("")},e.onEmployerUnfocus=function(){},e.allFieldsValid=function(){return e.is_account_name_valid&&e.is_email_valid&&e.is_password_valid},e.collectFormObject=function(){var t={account_name:jQuery("#account_name").val(),email:jQuery("#email-signup").val(),password:jQuery("#password-signup").val()};return e.is_password_valid&&(t.phone=e.phone_number),e.is_employer_valid&&(t.employer=e.employer),t},e.submitSignupForm=function(){if(log("form submitting"),e.allFieldsValid()){var n=e.collectFormObject(),s=e.getUserSignupEndpointRequest(n);s.execute(function(n){log(n),"0"===n.user_stored?e.$account_name_status.text("Account name already exists, please choose another").css("color","red"):"1"===n.user_stored&&(window.setTimeout(function(){t.path("/login")},100),$("#alert-msg").removeClass("hidden"),window.scrollTo(10,10))})}},e.clearSignupForm=function(){},e.getUserSignupEndpointRequest=function(e){return gapi.client.user_endpoint.user_signup(e)},e.setFocus=function(e){jQuery("#"+e).focus()},e.checkPath=function(){var n=t.path();"/signup"===n&&(e.setFocus("account_name"),e.onAccountNameFocus())},e.checkPath()}]);