"use strict";function log(e){console.log(e)}function timeNow(){return performance.now()}function timeDifference(e,t){return e-t}function round(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)}function loadStyleSheetsAsync(){config.stylesheetsAsyncLoad.forEach(function(e,t,n){jQuery("head").append(e)})}function defined(e){return void 0!==e}function regExpMatch(e,t){return console.log(e.test(t)),e.test(t)}function trim(e){return e=e.trim()}function validAccountName(e){return defined(e)&&trim(e).length>=3}function validEmail(e){return defined(e)&&regExpMatch(config.regexp.email,trim(e))}function validPassword(e){return defined(e)&&regExpMatch(config.regexp.password,trim(e))}function validPhone(e){return defined(e)&&regExpMatch(config.regexp.phone,trim(e))}function validEmployer(e){return defined(e)&&trim(e).length>=3}function validEventName(e){return e.length>0&&notAllDigits(e)}function notAllDigits(e){return!config.regexp.allNumbers.test(e)}function removeDisabledAttr(e){jQuery(e).attr("disabled",null)}function addDisabledAttr(e){jQuery(e).attr("disabled",!0)}function clearInput(e){jQuery(e).val("")}var app=angular.module("swdnP1App",["swdnP1AppControllers","ngRoute","ui.bootstrap"]),routeConfig=function(e){e.when("/events",{templateUrl:"/views/events.html",controller:"EventController"}),e.when("/create_event",{templateUrl:"/views/create_event.html",controller:"EventController"}),e.when("/login",{templateUrl:"/views/login.html",controller:"LoginController"}),e.when("/signup",{templateUrl:"/views/signup.html",controller:"SignupController"}),e.otherwise({redirectTo:"/"})};routeConfig.$inject=["$routeProvider"],app.config(routeConfig),app.filter("startFrom",function(){var e=function(e,t){return e.slice(t)};return e}),app.constant("HTTP_ERRORS",{UNAUTHORIZED:401,test:503});var app=angular.module("swdnP1App",["swdnP1AppControllers","ngRoute","ui.bootstrap"]),routeConfig=function(e){e.when("/events",{templateUrl:"/html/events.min.html",controller:"EventController"}),e.when("/create_event",{templateUrl:"/html/create_event.min.html",controller:"EventController"}),e.when("/login",{templateUrl:"/html/login.min.html",controller:"LoginController"}),e.when("/signup",{templateUrl:"/html/signup.min.html",controller:"SignupController"}),e.otherwise({redirectTo:"/"})};routeConfig.$inject=["$routeProvider"],app.config(routeConfig),app.filter("startFrom",function(){var e=function(e,t){return e.slice(t)};return e}),app.constant("HTTP_ERRORS",{UNAUTHORIZED:401,test:503});var app=angular.module("swdnP1App",["swdnP1AppControllers","ngRoute","ui.bootstrap"]),routeConfig=function(e){e.when("/events",{templateUrl:"/html/events.min.html",controller:"EventController"}),e.when("/create_event",{templateUrl:"/html/create_event.min.html",controller:"EventController"}),e.when("/login",{templateUrl:"/html/login.min.html",controller:"LoginController"}),e.when("/signup",{templateUrl:"/html/signup.min.html",controller:"SignupController"}),e.otherwise({redirectTo:"/"})};routeConfig.$inject=["$routeProvider"],app.config(routeConfig),app.filter("startFrom",function(){var e=function(e,t){return e.slice(t)};return e}),app.constant("HTTP_ERRORS",{UNAUTHORIZED:401,test:503});var config={regexp:{email:new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),password:new RegExp(/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}/),phone:new RegExp(/^((((\(\d{3}\))|(\d{3}-))\d{3}-\d{4})|(\+?\d{2}((-| )\d{1,8}){1,5}))(( x| ext)\d{1,5}){0,1}$/),allNumbers:new RegExp("^[-]?[0-9]+[.]?[0-9]+$")},stylesheetsAsyncLoad:[]},swdnP1App=swdnP1App||{},controllers=swdnP1App.controllers=angular.module("swdnP1AppControllers",["ui.bootstrap"]);controllers.controller("EventController",["$scope","$location",function(e,t){e.isEventNameValid=!1,e.isEventHostValid=!1,e.eventFormErrors=[],e.startDate,e.endDate,e.allEvents=[],e.createEvent=function(){e.eventFormErrors=[];e.createEventFormValid();0===e.eventFormErrors.length?e.sendGapiCreateForm():e.showMessageBox("#errors")},e.createEventFormValid=function(){var t,n=!0;return e.isEventNameValid||(error_object={error:"Event Name must be at least 1 character"},e.eventFormErrors.push(error_object),n=!1),e.isEventHostValid||(t={error:"Event Host must be at least 1 character"},e.eventFormErrors.push(t),n=!1),e.guestlistValid()||(t={error:"There must be at least one guest in the list"},e.eventFormErrors.push(t),n=!1),e.eventTypesValid()||(t={error:"There must be at least one event type in the list"},e.eventFormErrors.push(t),n=!1),0===jQuery("#address").val().length&&(t={error:"Address must be valid"},e.eventFormErrors.push(t),n=!1),n=e.checkDates()},e.checkDates=function(){return e.startDate<=Date.now()?(e.eventFormErrors.push({error:"The start date can not be in the past"}),!1):!(e.startDate>=e.endDate)||(e.eventFormErrors.push({error:"The start date can not be past the end date"}),!1)},e.onEventNameChange=function(){e.isEventNameValid=e.eventName.length>0},e.onEventHostChange=function(){e.isEventHostValid=e.eventHost.length>0},e.guestlistValid=function(){return jQuery("#guestlist").children().length>0},e.eventTypesValid=function(){return jQuery("#eventtype").children().length>0},e.onEventStartDateChange=function(){e.startDate=new Date(e.eventDateStart).getTime(),log("startdate = "+e.startDate)},e.onEventEndDateChange=function(){e.endDate=new Date(e.eventDateEnd).getTime(),log("end date = "+e.endDate)},e.deleteEventInfo=function(){jQuery(".event-info-row").remove()},e.showMessageBox=function(e){jQuery(e).removeClass("hidden")},e.closeMessageBox=function(e){jQuery(e).addClass("hidden")},e.sendGapiCreateForm=function(){var t,n,r,o=jQuery("#guestlist").children(),a=jQuery("#eventtype").children(),s=o.length,l=a.length,i=jQuery("#guest-message").val(),c={event_name:jQuery("#event-name-input").val(),event_host:jQuery("#event-host").val(),event_start:e.startDate,event_end:e.endDate,event_address:e.address};if(s>0){for(r=0,guests=[];r<s;r++)t=o[r].value,guests.push(t);c.event_guestlist=guests}if(l>0){for(r=0,event_types=[];r<l;r++)n=a[r].value,event_types.push(n);c.event_types=event_types}i.length>0?c.event_guestmessage=i:c.event_guestmessage="No current message for this event at this time",log(c);var u=gapi.client.user_endpoint.create_event(c);u.execute(function(t){t.hasOwnProperty("successful")&&"1"===t.successful&&(e.showMessageBox("#event-create-success"),jQuery("#eventname").text(e.eventName))})},e.addToDatalist=function(t,n){var r=jQuery("#"+n),o=jQuery("#"+t),a=o.val();a.length>0?(r.append("<option value='%s'>".replace("%s",a)),o.val(""),e.closeMessageBox("#errors")):(e.eventFormErrors=[],e.showMessageBox("#errors"),e.eventFormErrors.push({error:"You can't add blank input. Please provide some input then try again."}))},e.container=jQuery(".events-container-wrapper"),e.createDataList=function(e,t,n){if(e.hasOwnProperty("length")&&e.length>0){var r="<input list='%s'>".replace("%s",n+t),o="<datalist id='%s'>".replace("%s",n+t);return e.forEach(function(e,t){o+="<option value='%s'>".replace("%s",e)}),o+="</datalist>",{input:r,datalist:o}}return{input:"no",datalist:"values on the list"}},e.initMap=function(){log("map loaded")},e.loadAllEventsOntoPage=function(){var t,n,r,o,a,s,l,i,c,u,d,v=gapi.client.user_endpoint.all_events();v.execute(function(v){log(v),v.hasOwnProperty("events")?v.events.forEach(function(v,p){v.event_start=new Date(parseInt(v.event_start)),v.event_end=new Date(parseInt(v.event_end)),t=e.createDataList(v.event_guestlist,p,"guests"),n=e.createDataList(v.event_types,p,"eventtypes"),o="<div class='row text-left'><div class='col-xs-12'><label for='event_name'>Name of Event: </label><span id='event_name'> {{event_name}}</span></div></div> ",a="<div class='row text-left'><div class='col-xs-12'><label for='event_type'>Event Types: </label><span id='event_type'>%s </span></div></div> ".replace("%s",n.input+n.datalist),s="<div class='row text-left'><div class='col-xs-12'><label for='event_host'>Host of Event: </label><span id='event_host'> {{event_host}}</span></div></div> ",l="<div class='row text-left'><div class='col-xs-12'><label for='event_start'>Event Start Date: </label><span id='event_start'> {{event_start}}</span></div></div> ",i="<div class='row text-left'><div class='col-xs-12'><label for='event_end'>Event End Date: </label><span id='event_end'> {{event_end}}</span></div></div> ",c="<div class='row text-left'><div class='col-xs-12'><label for='event_guestlist'>Event Guest list: </label><span id='event_guestlist' class='event_guestlist_unbelievable'>%s </span></div></div> ".replace("%s",t.input+t.datalist),u="<div class='row text-left'><div class='col-xs-12'><label for='event_guestmessage'>Message for Guests: </label><span id='event_guestmessage'> {{event_guestmessage}}</span></div></div>",d="<div class='row text-left'><div class='col-xs-12'><label for='address'>Address for event: </label><span id='address'> {{event_address}}</span></div></div><hr> ",[o,a,s,l,i,c,u,d].forEach(function(t,n){r=Mustache.to_html(t,v),e.container.append(r)})}):(jQuery(".no-events").text("There are currently no events, to create an event click"),jQuery(".no-events").append(" <a href='/#/create_event'>create an event</a>"))})},e.loadAllEventsOntoPage()}]),jQuery(document).ready(function(){jQuery(window).resize(function(){$("#wrapper").removeClass("toggled")})}),controllers.controller("LoginController",["$scope","$location",function(e,t){e.account_name_valid=!1,e.password_valid=!1,e.submitLoginForm=function(){e.formValidated()&&e.sendGapiLoginForm()},e.formValidated=function(){return e.account_name_valid&&e.password_valid},e.sendGapiLoginForm=function(){var e={account_name:jQuery("#account-name-login").val(),password:jQuery("#login-password").val()},t=gapi.client.user_endpoint.user_login(e);t.execute(function(e){log(e),"0"===e.successful&&jQuery(".account-name-login-status").text(e.error_msg).css("color","red")})},e.onAccountNameChange=function(){validAccountName(e.account_name)?(jQuery(".account-name-login-status").text(" Account name valid").css("color","green"),e.account_name_valid=!0):(jQuery(".account-name-login-status").text("Password invalid").css("color","red"),e.account_name_valid=!1)},e.onPasswordChange=function(){validPassword(e.password)?(jQuery(".password-login-status").text("Password name valid").css("color","green"),e.password_valid=!0):(jQuery(".password-login-status").text("Account name invalid").css("color","red"),e.password_valid=!1)}}]),controllers.controller("RootController",["$scope","$location",function(e,t){e.toggleMenu=function(){jQuery("#wrapper").toggleClass("toggled")},e.loadInitialPage=function(){t.path("/events")},e.loadInitialPage()}]),controllers.controller("SignupController",["$scope","$location",function(e,t){e.account_name_error="Account name must be at least 3 characters",e.email_error="Email must meet the following requirements, Some letters, an @ sign, some letters, a period, some letters",e.password_error="Password must be 8 characters in length, include 1 lowercase and 1 uppercase letter",e.phone_error="Phone must be in format (555)555-5555",e.employer_error="Employer name must be at least 3 characters in length",e.account_name_valid_msg="Account name is valid",e.email_valid_msg="Email is valid",e.password_valid_msg="Password is valid",e.phone_valid_msg="Phone is valid",e.employer_valid_msg="Employer is valid",e.$account_name_status=jQuery(".account-name-status"),e.$email_status=jQuery(".email-status"),e.$password_status=jQuery(".password-status"),e.$phone_status=jQuery(".phone-status"),e.$employer_status=jQuery(".employer-status"),e.is_account_name_valid=!1,e.is_email_valid=!1,e.is_password_valid=!1,e.is_phone_valid=!1,e.is_employer_valid=!1,e.onAccountNameChange=function(){validAccountName(e.account_name)?(e.$account_name_status.text(e.account_name_valid_msg).css("color","green"),e.is_account_name_valid=!0):(e.$account_name_status.text(e.account_name_error).css("color","red"),e.is_account_name_valid=!1)},e.onEmailChange=function(){validEmail(e.email)?(e.$email_status.text(e.email_valid_msg).css("color","green"),e.is_email_valid=!0):(e.$email_status.text(e.email_error).css("color","red"),e.is_email_valid=!1)},e.onPasswordChange=function(){validPassword(e.password)?(e.$password_status.text(e.password_valid_msg).css("color","green"),e.is_password_valid=!0):(e.$password_status.text(e.password_error).css("color","red"),e.is_password_valid=!1)},e.onPhoneChange=function(){validPhone(e.phone_number)?(e.$phone_status.text(e.phone_valid_msg).css("color","green"),e.is_phone_valid=!0):(e.$phone_status.text(e.phone_error).css("color","red"),e.is_phone_valid=!1)},e.onEmployerChange=function(){validEmployer(e.employer)?(e.$employer_status.text(e.employer_valid_msg).css("color","green"),e.is_employer_valid=!0):(e.$employer_status.text(e.employer_error).css("color","red"),e.is_employer_valid=!1)},e.allFieldsValid=function(){return e.is_account_name_valid&&e.is_email_valid&&e.is_password_valid&&e.is_phone_valid&&e.is_employer_valid},e.collectFormObject=function(){return{account_name:jQuery("#account_name").val(),email:jQuery("#email-signup").val(),password:jQuery("#password-signup").val(),phone:jQuery("#phone").val(),employer:jQuery("#employer").val()}},e.submitSignupForm=function(){if(e.allFieldsValid()){var n=e.collectFormObject(),r=e.getUserSignupEndpointRequest(n);r.execute(function(n){log(n),"0"===n.user_stored?e.$account_name_status.text("Account name already exists, please choose another").css("color","red"):"1"===n.user_stored&&(t.path("/login"),$("#alert-msg").removeClass("hidden"),window.scrollTo(10,10))})}},e.clearSignupForm=function(){},e.getUserSignupEndpointRequest=function(e){return gapi.client.user_endpoint.user_signup(e)}}]);